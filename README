*************************************************************************************************************

SPACE INVADERS FOR fpga
by madov   ( 28 Jul 2021 )　

英語版はとりあえず書かず、日本語オンリーなREADMEです。

************************************************************************************************************

First version : 0.01 2021/06/28
                0.02 2021/07/10 すこし修正

＜注意＞
この文書や回路図、ソース等はすべて保証しません。自己責任でお願いします。
Please use at your own risk!


＜これは何？＞
intel(旧ALTERA) FPGA MAX10を使いスペースインベーダーを可能な範囲で再現した基板です。動作から類推した実装はなるべく
せず、回路図を参考にハード的な実装をしています。音声についても実基板に準拠し回路図になるべく忠実に再現しています。
(エクステンドの効果音のみ実装が非常に面倒だったので別回路で代替しています)

＜おもな仕様＞
・アーケード筐体向けなJAMMA仕様
・FPGA           MAX10　10M08/16/25 SAE144　
・電源           JAMMAの+5,+12Vを使用。+5Vから3.3Vを生成し主にFPGA系に使用。
・外部ROM        27512準拠(EEPROM W27C512を想定)
・ビデオ出力      8ビットカラー(R3G3B2)
・音声出力　　　  サブ基板上に実機っぽいアナログ回路を実装。+DSDAC　１チャネル。
・基板間通信    　LVDSで高速／低ノイズを実現（・・・したけどオーバースペック）
・DIPスイッチ搭載 ・・・大きいけど。
・デバッグ用LED   4ビット分のLED搭載

＜ファイルについて＞
fpga_toy.qfp    Quartus primeのプロジェクトファイル
fpga_toy.v      メインモジュール
74logic.v       74ロジックモジュール
/cpu            T80 CPUコア
/pcb_data       基板データ


＜動かし方＞
１．基板をつくる
  pcb_dataに入っているgerberデータを基板屋さん等に注文し、プリント基板を作成します。
  作者はよくJLCPCBさんに注文しています。
  
２．部品をはんだ付けする
  FPGAやその他IC類を仕入れてはんだ付けします。FPGAやレギュレータは部品裏側にはんだ接合を要するため、半田コテでは
  不可能です。リフローもしくはホットエアー必須。
  
３．実機からEPROM/PROMのデータを吸い出す

４．27512に内容を書き込む
  27512の$0000~に実機からのROMデータを書き込んでください。一部ROMは$4000からも使っているので、それも書き込みます。
  カラーPROMのデータは$F800から書き込んでください。
  
５．FPGAにプログラムを書き込む
　Quartus primeでプロジェクトファイルを読み込みコンパイル（？）。sofやpofファイルを書き込みます。
  デフォルトは10M16ですが、ピン互換である10M08/25でも可能です。
  
６．遊ぶ
  ROMをセット、基板を筐体にセットして電源ＯＮ。
  
＊たまにコンパイルしたとき、配置のばらつきでうまく動作しないことがあります。ちゃんとタイミング設計すれば良いのですが、
　作者は.sdcとかのタイミング設計をよく理解していないので各自コンパイル条件変更など適当に試してみてください。
 
 
＜そのほか＞
　・DIPスイッチは実機のものを反映しています。タクトスイッチ2個は画面の上下反転、リセット機能を割り振ってあります。
　・スペースインベーダーの回路については、インターネットに流れているものを参考にしました。所持している基板はタイトー純正
  ではないのですが、一部参考としています。このような性質上、当然にすべての正確性を保証するものではありません。
  ・当時と特性の違う部品も使っているので違いがあるかと思いますが、さすがにどうしようもありません・・・。
  ・著作権の都合上ROMデータは一切含まれていません。ROMデータについてはお問い合わせていただいても一切お答えできません。
  ・というか全般的にお問い合わせていただいてもあまり返答できないと思いますのでご了承ください。
  
